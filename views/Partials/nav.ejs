<nav class="navbar navbar-expand-lg bg-white border-bottom shadow-sm py-2">
  <div class="container-fluid">
    <!-- Left: Logo and Brand -->
    <a class="navbar-brand d-flex align-items-center" href="#">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        fill="blue"
        class="bi bi-pen me-2"
        viewBox="0 0 16 16"
      >
        <path
          d="M13.498.795l.149-.149a1.207 1.207 0 1 1 1.707 1.707l-.149.149L13.498.795zm-1.75 1.75L2.5 11.793V14h2.207l9.248-9.248-2.207-2.207z"
        />
      </svg>
      <span class="fw-bold text-dark">BlogSpace</span>
    </a>

    <!-- Mobile toggle -->
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Center + Right -->
    <div
      class="collapse navbar-collapse justify-content-between"
      id="navbarNav"
    >
      <!-- Center: Navigation links -->
      <ul class="navbar-nav mx-auto align-items-center">
        <!-- Home -->
        <li class="nav-item me-2">
          <a
            class="nav-link d-flex align-items-center text-dark fw-medium"
            href="/"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              class="bi bi-house me-1"
              viewBox="0 0 16 16"
            >
              <path
                d="M8.354 1.146a.5.5 0 0 0-.708 0L1 7.793V14a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V9h2v5a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V7.793L8.354 1.146z"
              />
            </svg>
            Home
          </a>
        </li>
        <!-- Add Blog -->
        <% if(locals.user) { %>
        <li class="nav-item">
          <a class="btn btn-outline-primary" href="/blog/add-blog">
            + Add Blog
          </a>
        </li>
        <% } %>
      </ul>

      <!-- Right: Auth buttons -->
      <% if (typeof user !== 'undefined' && user && user.email) { const email =
      user.email; const atIdx = email.indexOf('@'); const shortEmail = atIdx > 3
      ? email.slice(0, 3) + '...' + email.slice(atIdx) : email; %>
      <div class="d-flex align-items-center gap-2">
        <div class="dropdown">
          <button
            class="btn btn-light d-flex align-items-center gap-2"
            type="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            style="background-color: silver"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              class="bi bi-chevron-down"
              viewBox="0 0 16 16"
            >
              <path
                fill-rule="evenodd"
                d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"
              />
            </svg>
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li>
              <div class="dropdown-item-text">
                <div class="d-flex align-items-center gap-2 mb-2">
                  <div>
                    <h6 class="mb-0">Welcome, <%= shortEmail %></h6>
                    <small class="text-muted"><%= user.email %></small>
                  </div>
                </div>
              </div>
            </li>
            <li><hr class="dropdown-divider" /></li>
            <li>
              <a class="dropdown-item text-danger" href="/user/signOut">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  fill="currentColor"
                  class="bi bi-box-arrow-right me-1"
                  viewBox="0 0 16 16"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"
                  />
                  <path
                    fill-rule="evenodd"
                    d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"
                  />
                </svg>
                Sign Out
              </a>
            </li>
          </ul>
        </div>
      </div>
      <% } else { %>
      <div class="d-flex align-items-center gap-2">
        <a href="/user/signIn" class="btn btn-light d-flex align-items-center">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            fill="currentColor"
            class="bi bi-box-arrow-in-right me-1"
            viewBox="0 0 16 16"
          >
            <path
              fill-rule="evenodd"
              d="M6 3a1 1 0 0 1 1-1h4.5A1.5 1.5 0 0 1 13 3.5v9A1.5 1.5 0 0 1 11.5 14H7a1 1 0 0 1-1-1v-1h1v1h4.5a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5H7v1H6V3z"
            />
            <path
              fill-rule="evenodd"
              d="M.146 8.354a.5.5 0 0 1 0-.708L3.5 4.293a.5.5 0 1 1 .707.707L1.707 8l2.5 2.5a.5.5 0 0 1-.707.707L.146 8.354z"
            />
          </svg>
          Sign In
        </a>
        <a href="/user/signUp" class="btn btn-dark">Sign Up</a>
      </div>
      <% } %>
    </div>
  </div>
</nav>
